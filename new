using System;
using System.Collections.Generic;
using System.Numerics;

public enum Axis { X, Y, Z }

public static class PointCloudOps
{
    /// <summary>
    /// Inverts points by negating the selected axis coordinate (mirror through origin plane).
    /// </summary>
    public static void InvertAxisInPlace(IList<Vector3> pts, Axis axis)
    {
        if (pts == null) throw new ArgumentNullException(nameof(pts));

        for (int i = 0; i < pts.Count; i++)
        {
            var p = pts[i];
            pts[i] = axis switch
            {
                Axis.X => new Vector3(-p.X,  p.Y,  p.Z),
                Axis.Y => new Vector3( p.X, -p.Y,  p.Z),
                Axis.Z => new Vector3( p.X,  p.Y, -p.Z),
                _ => p
            };
        }
    }

    /// <summary>
    /// Returns a new array with the selected axis inverted (does not modify input).
    /// </summary>
    public static Vector3[] InvertAxis(IEnumerable<Vector3> pts, Axis axis)
    {
        if (pts == null) throw new ArgumentNullException(nameof(pts));

        // materialize once, then map
        var list = pts as IList<Vector3> ?? new List<Vector3>(pts);
        var outPts = new Vector3[list.Count];

        for (int i = 0; i < list.Count; i++)
        {
            var p = list[i];
            outPts[i] = axis switch
            {
                Axis.X => new Vector3(-p.X,  p.Y,  p.Z),
                Axis.Y => new Vector3( p.X, -p.Y,  p.Z),
                Axis.Z => new Vector3( p.X,  p.Y, -p.Z),
                _ => p
            };
        }
        return outPts;
    }
}